function delay(t,e){function n(t,e){u=setTimeout(function(){if(u=null,t(),A.length){var e=A.shift();n(e.fn,e.t)}},e)}var o,u,A=[];return o={delay:function(t,e){return A.length||u?A.push({fn:t,t:e}):n(t,e),o},cancel:function(){clearTimeout(u),A=[]}},o.delay(t,e)}function upTouch(t){var e=CANVAS.doc.getBoundingClientRect();GAME.touch.x=t.clientX-e.left,GAME.touch.x*=CANVAS.WIDTH/CANVAS.currentWidth,GAME.touch.y=t.clientY-e.top,GAME.touch.y*=CANVAS.HEIGHT/CANVAS.currentHeight}CANVAS.WIDTH=1280,CANVAS.HEIGHT=720,CANVAS.FPS=60,CANVAS.load=[["0_0","img/1_0.jpg"],["1_0","img/1_0.jpg"],["2_0","img/1_0.jpg"]],CANVAS.update=function(){},CANVAS.refresh=function(){CANVAS.Draw.clear(),CANVAS.Draw.rect(1,1,1278,718).stroke(),GAME.buttons.forEach(function(t,e){CANVAS.ctx.drawImage(CANVAS.images[e+"_0"],t.x,t.y,t.w,t.h),CANVAS.Draw.rect(t.x,t.y,t.w,t.h).fill(t.style)});var t="MousePos: "+GAME.touch.x+", "+GAME.touch.y,e="id: "+GAME.touch.id,n="press: "+GAME.touch.press;CANVAS.Draw.text(t,1,3,16,"black"),CANVAS.Draw.text(e,1,15,16,"black"),CANVAS.Draw.text(n,1,24,16,"black")};var GAME={state:-1,rules:!1,txt:"",buttons:[]};GAME.Player=function(t,e){this.points=e,this.next=t},GAME.me=new GAME.Player(1,5),GAME.you=new GAME.Player(null,0),GAME.Button=function(t,e,n,o,u){this.x=t,this.y=e,this.w=n,this.h=o,this.style=u};var colors=["rgba(255, 182, 193, 0.6)","rgba(144, 238, 144, 0.6)","rgba(137, 207, 240, 0.6)"];colors.forEach(function(t,e){GAME.buttons[e]=new GAME.Button(1032,24+224*e,224,224,t)}),GAME.click=function(){if(0==GAME.state)GAME.buttons.forEach(function(t,e){GAME.touch.x>=t.x&&GAME.touch.x<=t.x+t.w&&GAME.touch.y>=t.y&&GAME.touch.y<=t.y+t.h&&GAME.choose(e)});else if(1==GAME.state)GAME.state=0,GAME.me.points-GAME.you.points>=50&&(GAME.state=-1),GAME.me.points<GAME.you.points&&GAME.changeRules();else if(GAME.state<0){var t=0-GAME.state,e="";switch(t){case 1:e="Hello there! Welcome.";break;case 2:e="Since it's your first time playing, I will give myself 5 points.";break;default:GAME.state=1}GAME.state-=1,GAME.txt=e}},GAME.changeRules=function(){var t=.0557,e=t*(GAME.me.points-GAME.you.points),n=Math.random();e>n&&(GAME.rules=!GAME.rules)},GAME.gText=function(t){var e="";switch(t){case 1:e="According to the rules, you Lose when you "+(GAME.rules?"Lose":"Win");break;case 2:e="I'm impressed that a monkey like you managed to Win.";break;default:e="Since it's a Draw, it might as well be my point, right?"}return e},GAME.choose=function(t){GAME.you.next=t,GAME.state=1;var e=0;e=GAME.rules?GAME.me.next-GAME.you.next:GAME.you.next-GAME.me.next,e=(e+3)%3,console.log(t+" | "+e),2==e?GAME.you.points+=1:GAME.me.points+=1,GAME.txt=GAME.gText(e),console.log(GAME.txt)},GAME.touch={x:0,y:0,id:0,press:!1},CANVAS.init(),CANVAS.MOBILE?(window.addEventListener("touchstart",function(t){t.preventDefault();var e=t.touches[0];upTouch(e),GAME.touch.id=e.identifier,GAME.touch.press=!0},!1),window.addEventListener("touchmove",function(t){t.preventDefault();for(var e=t.changedTouches,n=(CANVAS.doc.getBoundingClientRect(),0);n<e.length;n+=1)GAME.touch.id==e[n].identifier&&upTouch(e[n])},!1),window.addEventListener("touchend",function(t){t.preventDefault();for(var e=t.changedTouches,n=0;n<e.length;n+=1)GAME.touch.id==e[n].identifier&&(GAME.touch.press=!1,GAME.click())},!1)):(window.addEventListener("mousedown",function(){GAME.touch.press=!0}),window.addEventListener("mousemove",upTouch,!1),window.addEventListener("mouseup",function(t){upTouch(t),GAME.touch.press=!1,GAME.click()},!1));
//# sourceMappingURL=rps.min.js.map