function delay(t,e){function n(t,e){A=setTimeout(function(){if(A=null,t(),i.length){var e=i.shift();n(e.fn,e.t)}},e)}var o,A,i=[];return o={delay:function(t,e){return i.length||A?i.push({fn:t,t:e}):n(t,e),o},cancel:function(){clearTimeout(A),i=[]}},o.delay(t,e)}CANVAS.WIDTH=1280,CANVAS.HEIGHT=720,CANVAS.FPS=60,CANVAS.load=[["0","img/0.jpg"],["1","img/1.jpg"],["2","img/2.jpg"],["0_0","img/0_0.png"],["1_0","img/1_0.png"],["2_0","img/2_0.png"],["0_1","img/0_1.png"],["1_1","img/1_1.png"],["2_1","img/2_1.png"]],CANVAS.update=function(){},CANVAS.refresh=function(){CANVAS.Draw.clear(),CANVAS.Draw.rect(1,1,1278,718).stroke(),GAME.n&&(CANVAS.ctx.drawImage(CANVAS.images[GAME.me.next],384,124,248,248),CANVAS.Draw.rect(384,124,248,248).fill("rgba("+colors[GAME.me.next]+",0.5)"),CANVAS.Draw.rect(384,124,248,248).stroke("black",8)),GAME.p&&(CANVAS.Draw.text("Me: "+GAME.me.points,36,576,76,"black"),CANVAS.Draw.text(GAME.you.points+" :You",1008,576,76,"black","right")),GAME.buttons.forEach(function(t,e){CANVAS.ctx.drawImage(CANVAS.images[e+"_"+t.state],t.x,t.y,t.w,t.h),CANVAS.Draw.rect(t.x,t.y,t.w,t.h).fill("rgba("+t.style+", .5)")}),CANVAS.Draw.text(GAME.txt,24,472,24,"black");var t="MousePos: "+GAME.touch.x+", "+GAME.touch.y,e="id: "+GAME.touch.id,n="press: "+GAME.touch.press;CANVAS.Draw.text(t,1,3,16,"black"),CANVAS.Draw.text(e,1,15,16,"black"),CANVAS.Draw.text(n,1,24,16,"black")};var GAME={state:-1,rules:!1,txt:"",count:0,n:0,p:0,buttons:[]};GAME.Player=function(t,e){this.points=e,this.next=t},GAME.me=new GAME.Player(1,3),GAME.you=new GAME.Player(null,0),GAME.Button=function(t,e,n,o,A){this.x=t,this.y=e,this.w=n,this.h=o,this.style=A,this.state=0};var colors=["255, 182, 193","144, 238, 144","137, 207, 240"];colors.forEach(function(t,e){GAME.buttons[e]=new GAME.Button(1032,24+224*e,224,224,t)}),GAME.hover=function(){0==GAME.state&&GAME.buttons.forEach(function(t){t.state=0,GAME.touch.x>=t.x&&GAME.touch.x<=t.x+t.w&&GAME.touch.y>=t.y&&GAME.touch.y<=t.y+t.h&&(t.state=1)})},GAME.click=function(){if(0==GAME.state)GAME.buttons.forEach(function(t,e){GAME.touch.x>=t.x&&GAME.touch.x<=t.x+t.w&&GAME.touch.y>=t.y&&GAME.touch.y<=t.y+t.h&&GAME.choose(e)});else if(1==GAME.state)GAME.me.next=parseInt(3*Math.random()),GAME.txt="",GAME.state=0,GAME.me.points-GAME.you.points>=19&&(GAME.txt="Too bad, you lost. Want to play again?",GAME.state=-6);else if(GAME.state<0){GAME.state-=1;var t=0-GAME.state-1,e="";switch(t){case 1:e="Hello there! Welcome.";break;case 2:e="This is just like normal Rock Paper Scissors.";break;case 3:e="The goal is to get a 19 points advantage.";break;case 4:e="Here is what I'm going to play, you do you.",GAME.n=!0;break;case 5:e="Since it's your first time playing, I will give myself 3 points.",GAME.p=!0;break;default:GAME.state=0,GAME.play||(GAME.play=!0)}GAME.txt=e,console.log("s: "+GAME.state)}},GAME.changeRules=function(){var t=.0557,e=t*GAME.count,n=Math.random();e>n&&(GAME.rules=!GAME.rules,GAME.txt="Hey, this is getting a bit unfair, how about we change the rules?",GAME.state=1),GAME.you.points-GAME.me.points>=18&&(GAME.txt="This game is dumb, I'm not playing unless you give me all your points"),console.log("p, r: "+e+" | "+n)},GAME.gText=function(t){var e="";switch(t){case 1:e="According to the rules, you Lose when you "+(GAME.rules?"Lose":"Win")+".";break;case 2:e="I'm impressed that a monkey like you managed to Win.";break;default:e="Since it's a Draw, it might as well be my Win, right?"}return e},GAME.choose=function(t){GAME.you.next=t,GAME.state=1;var e=0;e=GAME.rules?GAME.me.next-GAME.you.next:GAME.you.next-GAME.me.next,e=(e+3)%3,GAME.txt=GAME.gText(e),console.log("mn, yn, r: "+GAME.me.next+" | "+t+" | "+e),2==e?(GAME.you.points+=1,GAME.count+=1):(GAME.me.points+=1,GAME.count=0),console.log("p: "+GAME.me.points+" | "+GAME.you.points),GAME.me.points<GAME.you.points&&GAME.changeRules()},GAME.touch={x:0,y:0,id:0,press:!1},CANVAS.init(),GAME.upTouch=function(t){var e=CANVAS.doc.getBoundingClientRect();GAME.touch.x=t.clientX-e.left,GAME.touch.x*=CANVAS.WIDTH/CANVAS.currentWidth,GAME.touch.y=t.clientY-e.top,GAME.touch.y*=CANVAS.HEIGHT/CANVAS.currentHeight},CANVAS.MOBILE?(window.addEventListener("touchstart",function(t){t.preventDefault();var e=t.touches[0];GAME.upTouch(e),GAME.touch.id=e.identifier,GAME.touch.press=!0},!1),window.addEventListener("touchmove",function(t){t.preventDefault();for(var e=t.changedTouches,n=(CANVAS.doc.getBoundingClientRect(),0);n<e.length;n+=1)GAME.touch.id==e[n].identifier&&GAME.upTouch(e[n])},!1),window.addEventListener("touchend",function(t){t.preventDefault();for(var e=t.changedTouches,n=0;n<e.length;n+=1)GAME.touch.id==e[n].identifier&&(GAME.touch.press=!1,GAME.click())},!1)):(window.addEventListener("mousedown",function(){GAME.touch.press=!0}),window.addEventListener("mousemove",function(t){GAME.upTouch(t),GAME.hover()},!1),window.addEventListener("mouseup",function(t){GAME.upTouch(t),GAME.touch.press=!1,GAME.click()},!1));
//# sourceMappingURL=rps.min.js.map