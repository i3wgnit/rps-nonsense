function delay(t,e){function n(t,e){A=setTimeout(function(){if(A=null,t(),i.length){var e=i.shift();n(e.fn,e.t)}},e)}var o,A,i=[];return o={delay:function(t,e){return i.length||A?i.push({fn:t,t:e}):n(t,e),o},cancel:function(){clearTimeout(A),i=[]}},o.delay(t,e)}CANVAS.WIDTH=1280,CANVAS.HEIGHT=720,CANVAS.FPS=60,CANVAS.load=[["0","img/0.jpg"],["1","img/1.jpg"],["2","img/2.jpg"],["0_0","img/0_0.png"],["1_0","img/1_0.png"],["2_0","img/2_0.png"],["0_1","img/0_1.png"],["1_1","img/1_1.png"],["2_1","img/2_1.png"]],CANVAS.update=function(){},CANVAS.refresh=function(){CANVAS.Draw.clear(),CANVAS.Draw.rect(1,1,1278,718).stroke(),GAME.n&&(CANVAS.ctx.drawImage(CANVAS.images[GAME.me.next],384,124,248,248),CANVAS.Draw.rect(384,124,248,248).fill("rgba("+colors[GAME.me.next]+",0.5)"),CANVAS.Draw.rect(384,124,248,248).stroke("black",8),GAME.buttons.forEach(function(t,e){CANVAS.ctx.drawImage(CANVAS.images[e+"_"+t.state],t.x,t.y,t.w,t.h),CANVAS.Draw.rect(t.x,t.y,t.w,t.h).fill("rgba("+t.style+", .5)")})),GAME.p&&(CANVAS.Draw.text("Me: "+GAME.me.points,36,576,76,"black"),CANVAS.Draw.text(GAME.you.points+" :You",1008,576,76,"black","right")),CANVAS.Draw.text(GAME.text,24,472,24,"black");var t="MousePos: "+GAME.touch.x+", "+GAME.touch.y,e="id: "+GAME.touch.id,n="press: "+GAME.touch.press;CANVAS.Draw.text(t,1,3,16,"black"),CANVAS.Draw.text(e,1,15,16,"black"),CANVAS.Draw.text(n,1,24,16,"black")};var GAME={play:0,state:-1,rules:!1,text:"",txt:{},count:0,n:0,p:0,buttons:[]};GAME.win=12,GAME.txt.end=["Look at that! I won. Want to play again?"],GAME.txt.win=["I'm impressed that a monkey like you managed to Win."],GAME.txt.lose=["According to the rules, you Lose when you "],GAME.txt.draw=["Since it's a Draw, it might as well be my Win, right?"],GAME.txt.changeR=["Hey, this is getting a bit unfair, how about we change the rules?"],GAME.Player=function(t,e){this.points=e,this.next=t},GAME.me=new GAME.Player(1,3),GAME.you=new GAME.Player(null,0),GAME.Button=function(t,e,n,o,A){this.x=t,this.y=e,this.w=n,this.h=o,this.style=A,this.state=0};var colors=["255, 182, 193","144, 238, 144","137, 207, 240"];colors.forEach(function(t,e){GAME.buttons[e]=new GAME.Button(1032,24+224*e,224,224,t)}),GAME.hover=function(){0==GAME.state&&GAME.buttons.forEach(function(t){t.state=0,GAME.touch.x>=t.x&&GAME.touch.x<=t.x+t.w&&GAME.touch.y>=t.y&&GAME.touch.y<=t.y+t.h&&(t.state=1)})},GAME.rText=function(t){return t[parseInt(t.length*Math.random())]},GAME.click=function(){if(0==GAME.state)GAME.buttons.forEach(function(t,e){GAME.touch.x>=t.x&&GAME.touch.x<=t.x+t.w&&GAME.touch.y>=t.y&&GAME.touch.y<=t.y+t.h&&GAME.choose(e)});else if(1==GAME.state)GAME.text="",GAME.state=0,GAME.me.points-GAME.you.points>=GAME.win?(GAME.text=GAME.rText(GAME.txt.end),GAME.state=-1):(GAME.me.next+=parseInt(2*Math.random())+1,GAME.me.next%=3);else if(2==GAME.state)GAME.state=1,GAME.text="Way better, isn't it?",GAME.me.points+=GAME.you.points,GAME.you.points=0;else if(GAME.state<0)if(GAME.play)GAME.me.points=0,GAME.you.points=0,GAME.state=0,GAME.text="";else{GAME.state-=1;var t=0-GAME.state-1,e="";switch(t){case 1:e="Hello there! Welcome.";break;case 2:e="This is just like normal Rock Paper Scissors.";break;case 3:e="The goal is to get a "+GAME.win+" points advantage.";break;case 4:e="Since it's your first time playing, I will give myself 3 points.",GAME.p=!0;break;case 5:e="Here is what I'm going to play, you do you.",GAME.n=!0;break;default:GAME.state=0,GAME.play=!0}GAME.text=e,console.log("s: "+GAME.state)}},GAME.changeRules=function(){var t=.08475,e=t*(GAME.count-1),n=Math.random();e>n&&(GAME.rules=!GAME.rules,GAME.text=GAME.rText(GAME.txt.changeR),GAME.state=1),GAME.you.points-GAME.me.points>=GAME.win-1&&(GAME.text="This game is dumb, just give me your points, ok?",GAME.coubt=0,GAME.state=2),console.log("p, r: "+e+" | "+n)},GAME.gText=function(t){var e="";switch(t){case 1:e=GAME.rText(GAME.txt.lose)+(GAME.rules?"Lose":"Win")+".";break;case 2:e=GAME.rText(GAME.txt.win);break;default:e=GAME.rText(GAME.txt.draw)}return e},GAME.choose=function(t){GAME.you.next=t,GAME.state=1;var e=0;e=GAME.rules?GAME.me.next-GAME.you.next:GAME.you.next-GAME.me.next,e=(e+3)%3,GAME.text=GAME.gText(e),console.log("mn, yn, r: "+GAME.me.next+" | "+t+" | "+e),2==e?(GAME.you.points+=1,GAME.count+=1):(GAME.me.points+=1,GAME.count=0),console.log("p: "+GAME.me.points+" | "+GAME.you.points),GAME.me.points<GAME.you.points&&GAME.changeRules()},GAME.touch={x:0,y:0,id:0,press:!1},CANVAS.init(),GAME.upTouch=function(t){var e=CANVAS.doc.getBoundingClientRect();GAME.touch.x=t.clientX-e.left,GAME.touch.x*=CANVAS.WIDTH/CANVAS.currentWidth,GAME.touch.y=t.clientY-e.top,GAME.touch.y*=CANVAS.HEIGHT/CANVAS.currentHeight},CANVAS.MOBILE?(window.addEventListener("touchstart",function(t){t.preventDefault();var e=t.touches[0];GAME.upTouch(e),GAME.touch.id=e.identifier,GAME.touch.press=!0,GAME.hover()},!1),window.addEventListener("touchmove",function(t){t.preventDefault();for(var e=t.changedTouches,n=(CANVAS.doc.getBoundingClientRect(),0);n<e.length;n+=1)GAME.touch.id==e[n].identifier&&(GAME.upTouch(e[n]),GAME.hover())},!1),window.addEventListener("touchend",function(t){t.preventDefault();for(var e=t.changedTouches,n=0;n<e.length;n+=1)GAME.touch.id==e[n].identifier&&(GAME.touch.press=!1,GAME.click())},!1)):(window.addEventListener("mousedown",function(){GAME.hover(),GAME.touch.press=!0}),window.addEventListener("mousemove",function(t){GAME.upTouch(t),GAME.hover()},!1),window.addEventListener("mouseup",function(t){GAME.upTouch(t),GAME.touch.press=!1,GAME.click()},!1));
//# sourceMappingURL=rps.min.js.map